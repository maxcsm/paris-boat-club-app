"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9735],{9735:(U,m,e)=>{e.r(m),e.d(m,{EscalesmapPageModule:()=>k});var u=e(177),g=e(9417),a=e(8974),d=e(904),p=e(467),f=e(7762),y=e(3006),r=e(8244),i=e(4438),b=e(995);const v=[{path:"",component:(()=>{class n{constructor(t,o,s,l,c,h,M){this.formBuilder=t,this.alertController=o,this.redditService=s,this.router=l,this.modalController=c,this.loadingCtrl=h,this.loadingController=M,this.location=!1,this.role="",this.table="public_locations_short",this.table2="locations",this.status="",this.category=2,this.filter="",this.per_page=100,this.order_id="id",this.order_by="desc",this.page=1}ngAfterViewInit(){this.initializeMap()}ionViewWillEnter(){this.initializeMap()}initializeMap(){var t=this;return(0,p.A)(function*(){t.latposition=48.8582599,t.lngposition=2.2945006,t.map=r.map("map").setView([t.latposition,t.lngposition],16),r.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(t.map),yield t.loadingCtrl.create({message:"Chargement..",spinner:"bubbles"}),t.redditService.getDataAll("public_locations_escales").subscribe(s=>{t.posts=s.locations,t.posts.forEach(l=>{})})})()}getPositionNew(){var t=this;return(0,p.A)(function*(){const o=yield t.loadingController.create({message:"Recherche localisation"});o.present();const s=yield f.L.getCurrentPosition();console.log("Current position:",s),null!==s.coords.latitude&&(t.latposition=s.coords.latitude,t.lngposition=s.coords.longitude,console.log(t.latposition),console.log(t.lngposition),t.location=!0,setTimeout(()=>{o.dismiss(),r.icon({iconUrl:"./assets/icon/marker-icon.png",iconAnchor:[2,32]}),t.addmarker({lat:t.latposition,lng:t.lngposition})},1e3))})()}leafletMap(){r.icon({iconUrl:"./assets/icon/marker-icon.png",iconAnchor:[60,60]}),this.map=new r.Map("map").setView([this.latposition,this.lngposition],14),r.tileLayer("http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",{}).addTo(this.map),this.markers=r.layerGroup().addTo(this.map)}loadPoint(){this.posts.forEach(t=>{console.log(t),this.addmarker2(t),console.log("foreatch")})}addmarker(t){console.log(t);var o=r.icon({iconUrl:"./assets/icon/marker-icon.png",iconAnchor:[2,32]});const s=r.marker([t.lat,t.lng],{icon:o});this.map.addLayer(s),this.map.setView([this.latposition,this.lngposition],17)}addmarker2(t){var o=r.icon({iconUrl:"./assets/icon/escale.png",iconAnchor:[2,10]});console.log(t);const s=r.marker([t.lat,t.lng],{icon:o});s.bindPopup("<p>"+t.title+'</p><center><ion-button id="popup-button" > Voir  </ion-button>'),this.map.addLayer(s),s.on("click",l=>{const c=document.getElementById("popup-button");c&&c.addEventListener("click",h=>{console.log(h),console.log(t.id),this.idetail=t.id,this.edit(t.id),s.closePopup()})})}edit(t){var o=this;return(0,p.A)(function*(){const s=yield o.modalController.create({component:y.F,componentProps:{paramID:t}});return s.onDidDismiss().then(l=>{null!==l&&(o.modelData=l.data,console.log("Modal Data : "+l.data))}),yield s.present()})()}getdataByid(){var t=this;return(0,p.A)(function*(){console.log("detail event"),t.redditService.getByid(t.table,t.eventid).subscribe(o=>{t.postsevents=o.users,console.log(t.postsevents),t.techs=o.techs,t.appointement=[o.appointement],t.lngevnt=t.techs.lenght})})()}goList(){this.router.navigateByUrl("/tabs/posts")}static#t=this.\u0275fac=function(o){return new(o||n)(i.rXU(g.ok),i.rXU(a.hG),i.rXU(b.s),i.rXU(d.Ix),i.rXU(a.W3),i.rXU(a.Xi),i.rXU(a.Xi))};static#o=this.\u0275cmp=i.VBU({type:n,selectors:[["app-escalesmap"]],decls:11,vars:0,consts:[["color","secondary"],["slot","start"],["slot","primary"],["id","map"],["vertical","bottom","horizontal","end","slot","fixed",1,"btmap"],[3,"click"],["name","list"]],template:function(o,s){1&o&&(i.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),i.nrm(3,"ion-menu-button"),i.k0s(),i.j41(4,"ion-title"),i.EFF(5,"ParisBoatClub "),i.k0s(),i.nrm(6,"ion-buttons",2),i.k0s()(),i.nrm(7,"div",3),i.j41(8,"ion-fab",4)(9,"ion-fab-button",5),i.bIt("click",function(){return s.goList()}),i.nrm(10,"ion-icon",6),i.k0s()())},dependencies:[a.QW,a.Q8,a.YW,a.eU,a.iq,a.MC,a.BC,a.ai],styles:["#map[_ngcontent-%COMP%]{height:100vh}.btmap[_ngcontent-%COMP%]{bottom:90px;right:15}"]})}return n})()}];let C=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#o=this.\u0275mod=i.$C({type:n});static#i=this.\u0275inj=i.G2t({imports:[d.iI.forChild(v),d.iI]})}return n})();var P=e(4842);let k=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#o=this.\u0275mod=i.$C({type:n});static#i=this.\u0275inj=i.G2t({imports:[u.MD,g.YN,a.bv,C,P.h]})}return n})()}}]);