"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2063],{2063:(E,p,l)=>{l.r(p),l.d(p,{TechsPageModule:()=>T});var g=l(177),a=l(9417),o=l(8974),h=l(904),m=l(467),e=l(4438),u=l(4517),_=l(995);function f(r,d){if(1&r){const t=e.RV6();e.j41(0,"ion-item",14),e.bIt("click",function(i){const s=e.eBV(t).$implicit,c=e.XpG();return e.Njj(c.edit(i,s))}),e.j41(1,"ion-avatar",0),e.nrm(2,"ion-icon",15),e.k0s(),e.j41(3,"ion-label")(4,"ion-text")(5,"h2"),e.EFF(6),e.k0s(),e.j41(7,"p"),e.EFF(8),e.k0s()()(),e.j41(9,"ion-label",16)(10,"h3"),e.EFF(11),e.k0s(),e.j41(12,"p"),e.EFF(13),e.nI1(14,"date"),e.k0s()(),e.j41(15,"ion-badge",1),e.EFF(16," Technicien "),e.k0s()()}if(2&r){const t=d.$implicit;e.R7$(6),e.Lme("",t.firstname," ",t.lastname,""),e.R7$(2),e.JRh(t.phone_number),e.R7$(3),e.JRh(t.city),e.R7$(2),e.JRh(e.i5U(14,5,t.created_at,"dd-MM-YYYY"))}}function b(r,d){if(1&r){const t=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar"),e.nrm(2,"ion-buttons",0),e.j41(3,"ion-title"),e.EFF(4," Ajouter "),e.k0s(),e.j41(5,"ion-buttons",17)(6,"ion-button",18),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.modal.dismiss())}),e.EFF(7," Annuler "),e.k0s()()()(),e.j41(8,"ion-content",19)(9,"form",20),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.doSave())}),e.j41(10,"ion-item")(11,"ion-label",21),e.nrm(12,"ion-icon",22),e.EFF(13," Pr\xe9nom * "),e.k0s(),e.j41(14,"ion-input",23),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.firstname,i)||(s.firstname=i),e.Njj(i)}),e.k0s()(),e.j41(15,"ion-item",24)(16,"ion-label",21),e.nrm(17,"ion-icon",22),e.EFF(18," Nom * "),e.k0s(),e.j41(19,"ion-input",25),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.lastname,i)||(s.lastname=i),e.Njj(i)}),e.k0s()(),e.j41(20,"ion-item",24)(21,"ion-label",21),e.nrm(22,"ion-icon",26),e.EFF(23," Email * "),e.k0s(),e.j41(24,"ion-input",27),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.email,i)||(s.email=i),e.Njj(i)}),e.k0s()()(),e.j41(25,"ion-item")(26,"ion-label",28),e.EFF(27," Adresse "),e.k0s(),e.j41(28,"ion-input",29),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.address,i)||(s.address=i),e.Njj(i)}),e.k0s()(),e.j41(29,"ion-item")(30,"ion-label",28),e.EFF(31," CP "),e.k0s(),e.j41(32,"ion-input",30),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.cp,i)||(s.cp=i),e.Njj(i)}),e.k0s()(),e.j41(33,"ion-item")(34,"ion-label",28),e.EFF(35," Ville "),e.k0s(),e.j41(36,"ion-input",31),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.city,i)||(s.city=i),e.Njj(i)}),e.k0s()(),e.j41(37,"ion-item")(38,"ion-label",28),e.EFF(39,"T\xe9l\xe9phone"),e.k0s(),e.j41(40,"ion-input",32),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.phone,i)||(s.phone=i),e.Njj(i)}),e.k0s()(),e.j41(41,"p"),e.EFF(42," L'utilisateur va re\xe7evoir un mot de passe provisoire."),e.k0s(),e.j41(43,"ion-button",33),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.doSave())}),e.EFF(44,"Enregister"),e.k0s()()}if(2&r){const t=e.XpG();e.R7$(9),e.Y8G("formGroup",t.validations_form),e.R7$(5),e.R50("ngModel",t.firstname),e.R7$(5),e.R50("ngModel",t.lastname),e.R7$(5),e.R50("ngModel",t.email),e.R7$(4),e.R50("ngModel",t.address),e.R7$(4),e.R50("ngModel",t.cp),e.R7$(4),e.R50("ngModel",t.city),e.R7$(4),e.R50("ngModel",t.phone),e.R7$(3),e.Y8G("disabled",!t.validations_form.value)}}const j=[{path:"",component:(()=>{class r{constructor(t,n,i,s,c,y,C,M,F,x){this.navCtrl=t,this.formBuilder=n,this.popoverCtrl=i,this.alertController=s,this.menu=c,this.loadingController=y,this.redditService=C,this.router=M,this.toastCtrl=F,this.loadingCtrl=x,this.rolename="Administrateur",this.role=2,this.table="users",this.status="",this.category=2,this.filter="",this.wordid="",this.total=0,this.last_page=0,this.per_page=20,this.order_id="id",this.order_by="desc",this.validation_messages={firstname:[{type:"required",message:"Pr\xe9nom requis."},{type:"minlength",message:"3 caract\xe8res minimum."},{type:"maxlength",message:"25 caract\xe8res maximum."}],lastname:[{type:"required",message:"Nom requis."},{type:"minlength",message:"3 caract\xe8res minimum."},{type:"maxlength",message:"25 caract\xe8res maximum."}],email:[{type:"required",message:"Email requis."},{type:"pattern",message:"Email non valide."}]},this.page=1}ngOnInit(){this.getData(),this.validations_form=this.formBuilder.group({email:new a.MJ("",a.k0.compose([a.k0.required,a.k0.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),firstname:new a.MJ("",a.k0.compose([a.k0.maxLength(25),a.k0.minLength(3),a.k0.required])),lastname:new a.MJ("",a.k0.compose([a.k0.maxLength(25),a.k0.minLength(3),a.k0.required]))})}getData(){var t=this;return(0,m.A)(function*(){const n=yield t.loadingCtrl.create({message:"Chargement..",spinner:"bubbles"});yield n.present(),t.page=1,t.redditService.getDataBypage(t.page,t.table,t.per_page,t.order_id,t.order_by,t.category,t.status,t.filter).subscribe(i=>{console.log(i),n.dismiss(),t.posts=i.data,t.total=i.total,t.per_page=i.per_page,t.currentpage=i.current_page,t.last_page=i.last_page})})()}next(t){this.currentpage<this.last_page&&(this.page=this.page+1,this.redditService.getDataBypage(this.page,this.table,this.per_page,this.order_id,this.order_by,this.category,this.status,this.filter).subscribe(n=>{let i=n.data;for(let s of i)this.posts.push(s);this.total=n.total,this.per_page=n.per_page,this.currentpage=n.current_page,this.last_page=n.last_page})),t.target.complete()}doInfinite(t){var n=this;return(0,m.A)(function*(){n.next(t)})()}onChangeWord(t){var n=this;return(0,m.A)(function*(){n.filter=t.target.value,n.page=1,setTimeout(()=>{n.getData()},800)})()}onCancelword(t){}reset(){this.filter="",this.page=1,this.per_page=20,this.getData()}cancel(){this.modal.dismiss(null,"cancel")}onWillDismiss(t){}doSave(){var t=JSON.stringify({lastname:this.lastname,firstname:this.firstname,phone_number:this.phone,email:this.email,address:this.address,city:this.city,cp:this.cp,role:this.role});console.log(t),this.redditService.adduser(t).subscribe(n=>{this.modal.dismiss(),this.getData(),console.log(n),setTimeout(()=>{this.router.navigateByUrl("/techs"),this.lastname="",this.firstname="",this.phone="",this.email="",this.address="",this.city="",this.cp=""},400)})}prev(){this.page>1&&(this.page=this.page-1,this.getData())}forward(){this.currentpage<this.last_page&&(this.page=this.last_page,this.redditService.getDataBypage(this.page,this.table,this.per_page,this.order_id,this.order_by,this.category,this.status,this.filter).subscribe(t=>{console.log(t),this.posts=t.data,this.total=t.total,this.per_page=t.per_page,this.currentpage=t.current_page,this.last_page=t.last_page}))}backward(){this.currentpage>1&&(this.page=1,this.getData())}edit(t,n){var i=this;return(0,m.A)(function*(){i.router.navigateByUrl("/account/"+n.id)})()}static#e=this.\u0275fac=function(n){return new(n||r)(e.rXU(u.q9),e.rXU(a.ok),e.rXU(o.IE),e.rXU(o.hG),e.rXU(o._t),e.rXU(o.Xi),e.rXU(_.s),e.rXU(h.Ix),e.rXU(o.K_),e.rXU(o.Xi))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-techs"]],viewQuery:function(n,i){if(1&n&&e.GBs(o.Sb,5),2&n){let s;e.mGM(s=e.lsd())&&(i.modal=s.first)}},decls:27,vars:2,consts:[["slot","start"],["slot","end"],["id","open-modal-tech","color","primary"],["name","add-circle"],[2,"background-color","#E4E4E4","border-radius","10px"],["size-xl","8","size-md","6","size-xs","12"],["size-xl","4","size-md","6","size-xs","12",2,"padding-top","12px"],["color","primary",3,"click"],["name","refresh-outline"],["color","primary"],["button","",3,"click",4,"ngFor","ngForOf"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Chargement..."],["trigger","open-modal-tech",3,"willDismiss"],["button","",3,"click"],["name","person-circle-outline"],[1,"ion-text-wrap"],["slot","end","color","primary"],[3,"click"],[1,"ion-padding"],["novalidate","",1,"list-form",3,"ngSubmit","formGroup"],["position","floating"],["name","person","item-start",""],["type","text","formControlName","firstname",3,"ngModelChange","ngModel"],[1,"border"],["type","text","formControlName","lastname",3,"ngModelChange","ngModel"],["name","at","item-start",""],["type","email","formControlName","email",3,"ngModelChange","ngModel"],["position","stacked"],["inputmode","text","placeholder","Adresse",3,"ngModelChange","ngModel"],["inputmode","text","placeholder","CP",3,"ngModelChange","ngModel"],["inputmode","text","placeholder","Ville",3,"ngModelChange","ngModel"],["inputmode","text","placeholder","T\xe9l\xe9phone",3,"ngModelChange","ngModel"],["expand","block","color","danger",3,"click","disabled"]],template:function(n,i){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-menu-button"),e.k0s(),e.j41(4,"ion-title"),e.EFF(5," Techniciens "),e.k0s(),e.j41(6,"ion-buttons",1)(7,"ion-button",2),e.nrm(8,"ion-icon",3),e.k0s()()()(),e.j41(9,"ion-content")(10,"ion-content")(11,"ion-grid")(12,"ion-row",4),e.nrm(13,"ion-col",5),e.j41(14,"ion-col",6)(15,"ion-button",7),e.bIt("click",function(){return i.reset()}),e.nrm(16,"ion-icon",8),e.k0s(),e.j41(17,"ion-button",9),e.EFF(18," Nombre de r\xe9sultats : "),e.j41(19,"b"),e.EFF(20),e.k0s()()()()(),e.j41(21,"ion-list"),e.DNE(22,f,17,8,"ion-item",10),e.k0s(),e.j41(23,"ion-infinite-scroll",11),e.bIt("ionInfinite",function(c){return i.doInfinite(c)}),e.nrm(24,"ion-infinite-scroll-content",12),e.k0s()(),e.j41(25,"ion-modal",13),e.bIt("willDismiss",function(c){return i.onWillDismiss(c)}),e.DNE(26,b,45,9,"ng-template"),e.k0s()()),2&n&&(e.R7$(20),e.JRh(i.total),e.R7$(2),e.Y8G("ngForOf",i.posts))},dependencies:[g.Sq,a.qT,a.BC,a.cb,a.j4,a.JD,a.vS,o.mC,o.In,o.Jm,o.QW,o.hU,o.W9,o.lO,o.eU,o.iq,o.Ax,o.Hp,o.$w,o.uz,o.he,o.nf,o.MC,o.ln,o.IO,o.BC,o.ai,o.Sb,o.Gw,g.vh]})}return r})()}];let k=(()=>{class r{static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275mod=e.$C({type:r});static#i=this.\u0275inj=e.G2t({imports:[h.iI.forChild(j),h.iI]})}return r})(),T=(()=>{class r{static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275mod=e.$C({type:r});static#i=this.\u0275inj=e.G2t({imports:[g.MD,a.X1,a.YN,o.bv,k]})}return r})()}}]);